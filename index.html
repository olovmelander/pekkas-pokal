<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üèÜ Pekkas Pokal - Ultimate Competition Tracker</title>
  
  <!-- Chart.js for visualizations -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  
  <style>
    /* ===== THEME & VARIABLES ===== */
    :root {
      --gold: linear-gradient(135deg, #FFD700, #FFA500);
      --silver: linear-gradient(135deg, #C0C0C0, #808080);
      --bronze: linear-gradient(135deg, #CD7F32, #8B4513);
      --epic-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      --fire-gradient: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
      --ice-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      --nature-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
      
      --bg-dark: #0f0f23;
      --bg-card: #1a1a2e;
      --bg-card-hover: #16213e;
      --text-primary: #ffffff;
      --text-secondary: #a8b2d1;
      --text-muted: #64748b;
      --accent: #667eea;
      --success: #4ade80;
      --danger: #f87171;
      --warning: #fbbf24;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background: var(--bg-dark);
      color: var(--text-primary);
      min-height: 100vh;
      background-image: 
        radial-gradient(circle at 20% 80%, rgba(102, 126, 234, 0.1) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(118, 75, 162, 0.1) 0%, transparent 50%);
    }

    /* ===== HEADER ===== */
    .header {
      background: rgba(26, 26, 46, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 2px solid rgba(102, 126, 234, 0.3);
      padding: 1.5rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      animation: slideDown 0.5s ease-out;
    }

    @keyframes slideDown {
      from { transform: translateY(-100%); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .header-content {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: 1rem;
    }

    .trophy-logo {
      font-size: 2.5rem;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1) rotate(0deg); }
      50% { transform: scale(1.1) rotate(5deg); }
    }

    .logo h1 {
      font-size: 1.8rem;
      background: var(--epic-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .year-display {
      font-size: 0.9rem;
      color: var(--text-secondary);
      margin-left: 1rem;
      padding: 0.3rem 0.8rem;
      border: 1px solid rgba(102, 126, 234, 0.3);
      border-radius: 20px;
    }

    /* ===== NAVIGATION TABS ===== */
    .nav-tabs {
      display: flex;
      gap: 1rem;
      padding: 1rem 2rem;
      background: rgba(26, 26, 46, 0.5);
      border-bottom: 1px solid rgba(102, 126, 234, 0.2);
      overflow-x: auto;
      justify-content: center;
    }

    .nav-tab {
      padding: 0.8rem 1.5rem;
      background: transparent;
      color: var(--text-secondary);
      border: 2px solid transparent;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: 600;
      white-space: nowrap;
      position: relative;
      overflow: hidden;
    }

    .nav-tab::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: var(--epic-gradient);
      opacity: 0.2;
      transition: left 0.3s ease;
    }

    .nav-tab:hover::before {
      left: 0;
    }

    .nav-tab.active {
      background: var(--epic-gradient);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
    }

    .nav-tab span {
      margin-right: 0.5rem;
    }

    /* ===== MAIN CONTAINER ===== */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 2rem;
    }

    .tab-content {
      display: none;
      animation: fadeIn 0.5s ease-out;
    }

    .tab-content.active {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* ===== DASHBOARD SECTION ===== */
    .dashboard-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1.5rem;
      margin-bottom: 2rem;
    }

    .stat-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      border: 1px solid rgba(102, 126, 234, 0.2);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .stat-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--epic-gradient);
    }

    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
      border-color: var(--accent);
    }

    .stat-icon {
      font-size: 2rem;
      margin-bottom: 0.5rem;
    }

    .stat-value {
      font-size: 2.5rem;
      font-weight: bold;
      background: var(--epic-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin: 0.5rem 0;
    }

    .stat-label {
      color: var(--text-secondary);
      font-size: 0.9rem;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .stat-change {
      margin-top: 0.5rem;
      font-size: 0.85rem;
      display: flex;
      align-items: center;
      gap: 0.3rem;
    }

    .stat-change.positive {
      color: var(--success);
    }

    .stat-change.negative {
      color: var(--danger);
    }

    /* ===== LEADERBOARD ===== */
    .leaderboard {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      margin-bottom: 2rem;
    }

    .leaderboard-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
      padding-bottom: 1rem;
      border-bottom: 2px solid rgba(102, 126, 234, 0.2);
    }

    .leaderboard-title {
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .leaderboard-filters {
      display: flex;
      gap: 0.5rem;
    }

    .filter-btn {
      padding: 0.5rem 1rem;
      background: rgba(102, 126, 234, 0.1);
      border: 1px solid rgba(102, 126, 234, 0.3);
      border-radius: 8px;
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.3s ease;
      font-size: 0.85rem;
    }

    .filter-btn:hover,
    .filter-btn.active {
      background: var(--epic-gradient);
      color: white;
      transform: translateY(-2px);
    }

    .leaderboard-list {
      display: flex;
      flex-direction: column;
      gap: 0.75rem;
    }

    .leaderboard-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      background: rgba(255, 255, 255, 0.02);
      border-radius: 12px;
      border: 1px solid rgba(102, 126, 234, 0.1);
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      overflow: hidden;
    }

    .leaderboard-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 4px;
      background: transparent;
      transition: all 0.3s ease;
    }

    .leaderboard-item:hover {
      transform: translateX(10px);
      background: rgba(102, 126, 234, 0.1);
      border-color: var(--accent);
    }

    .leaderboard-item.gold::before { background: var(--gold); }
    .leaderboard-item.silver::before { background: var(--silver); }
    .leaderboard-item.bronze::before { background: var(--bronze); }

    .position {
      font-size: 1.5rem;
      font-weight: bold;
      width: 50px;
      text-align: center;
      color: var(--text-secondary);
    }

    .position.gold { 
      background: var(--gold);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .position.silver {
      background: var(--silver);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .position.bronze {
      background: var(--bronze);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .player-info {
      flex: 1;
      margin-left: 1rem;
    }

    .player-name {
      font-weight: 600;
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
    }

    .player-stats {
      display: flex;
      gap: 1rem;
      font-size: 0.85rem;
      color: var(--text-secondary);
    }

    .player-score {
      font-size: 1.3rem;
      font-weight: bold;
      color: var(--accent);
      margin-left: auto;
    }

    .trophy-count {
      display: flex;
      gap: 0.5rem;
      align-items: center;
      margin-left: 1rem;
    }

    .trophy {
      display: flex;
      align-items: center;
      gap: 0.2rem;
      padding: 0.3rem 0.6rem;
      background: rgba(255, 215, 0, 0.1);
      border-radius: 12px;
      font-size: 0.9rem;
    }

    /* ===== ACHIEVEMENTS ===== */
    .achievements-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
      gap: 1rem;
      margin: 2rem 0;
    }

    .achievement {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 1rem;
      text-align: center;
      border: 2px solid transparent;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
    }

    .achievement.unlocked {
      border-color: var(--accent);
      background: rgba(102, 126, 234, 0.1);
    }

    .achievement.locked {
      opacity: 0.5;
      filter: grayscale(100%);
    }

    .achievement:hover {
      transform: scale(1.05);
    }

    .achievement-icon {
      font-size: 2.5rem;
      margin-bottom: 0.5rem;
    }

    .achievement-name {
      font-weight: 600;
      font-size: 0.9rem;
      margin-bottom: 0.3rem;
    }

    .achievement-desc {
      font-size: 0.75rem;
      color: var(--text-secondary);
    }

    .achievement.legendary {
      background: linear-gradient(135deg, rgba(255, 215, 0, 0.1), rgba(255, 165, 0, 0.1));
      border-color: gold;
      animation: shimmer 3s infinite;
    }

    @keyframes shimmer {
      0%, 100% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.3); }
      50% { box-shadow: 0 0 30px rgba(255, 215, 0, 0.5); }
    }

    /* ===== RIVALRY SECTION ===== */
    .rivalry-card {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      margin: 1rem 0;
      border: 2px solid rgba(255, 107, 107, 0.3);
      position: relative;
      overflow: hidden;
    }

    .rivalry-card::before {
      content: '‚öîÔ∏è';
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      font-size: 8rem;
      opacity: 0.05;
    }

    .rivalry-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .rivalry-title {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
      color: var(--warning);
    }

    .rivalry-players {
      display: flex;
      justify-content: space-around;
      align-items: center;
      margin: 1.5rem 0;
    }

    .rivalry-player {
      text-align: center;
      flex: 1;
    }

    .rivalry-player-name {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 0.5rem;
    }

    .rivalry-score {
      font-size: 2.5rem;
      font-weight: bold;
    }

    .rivalry-vs {
      font-size: 1.5rem;
      color: var(--text-muted);
      margin: 0 1rem;
    }

    .rivalry-stats {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }

    .rivalry-stat {
      text-align: center;
    }

    .rivalry-stat-value {
      font-size: 1.3rem;
      font-weight: bold;
      color: var(--accent);
    }

    .rivalry-stat-label {
      font-size: 0.8rem;
      color: var(--text-secondary);
      text-transform: uppercase;
    }

    /* ===== CHARTS ===== */
    .chart-container {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      margin: 1rem 0;
      min-height: 400px;
    }

    .chart-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1.5rem;
    }

    .chart-title {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .chart-options {
      display: flex;
      gap: 0.5rem;
    }

    /* ===== RECORDS SECTION ===== */
    .records-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1rem;
      margin: 2rem 0;
    }

    .record-card {
      background: var(--bg-card);
      border-radius: 12px;
      padding: 1.2rem;
      border: 1px solid rgba(102, 126, 234, 0.2);
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .record-card::after {
      content: 'üìú';
      position: absolute;
      bottom: -10px;
      right: -10px;
      font-size: 3rem;
      opacity: 0.1;
    }

    .record-card:hover {
      transform: translateY(-3px);
      border-color: var(--accent);
      box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
    }

    .record-label {
      font-size: 0.85rem;
      color: var(--text-secondary);
      text-transform: uppercase;
      margin-bottom: 0.5rem;
    }

    .record-value {
      font-size: 1.5rem;
      font-weight: bold;
      color: var(--accent);
      margin-bottom: 0.3rem;
    }

    .record-holder {
      font-size: 1rem;
      color: var(--text-primary);
    }

    .record-date {
      font-size: 0.8rem;
      color: var(--text-muted);
      margin-top: 0.3rem;
    }

    /* ===== FUN STATS ===== */
    .fun-stats {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(240, 147, 251, 0.1));
      border-radius: 16px;
      padding: 1.5rem;
      margin: 2rem 0;
      border: 2px solid rgba(102, 126, 234, 0.3);
    }

    .fun-stats-title {
      font-size: 1.5rem;
      text-align: center;
      margin-bottom: 1.5rem;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .fun-stat-item {
      display: flex;
      align-items: center;
      padding: 1rem;
      margin: 0.5rem 0;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 12px;
      transition: all 0.3s ease;
    }

    .fun-stat-item:hover {
      transform: translateX(10px);
      background: rgba(255, 255, 255, 0.1);
    }

    .fun-stat-emoji {
      font-size: 2rem;
      margin-right: 1rem;
    }

    .fun-stat-content {
      flex: 1;
    }

    .fun-stat-title {
      font-weight: 600;
      color: var(--accent);
      margin-bottom: 0.2rem;
    }

    .fun-stat-desc {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    /* ===== POWER RANKINGS ===== */
    .power-ranking {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 1.5rem;
      margin: 2rem 0;
    }

    .power-ranking-header {
      text-align: center;
      margin-bottom: 1.5rem;
    }

    .power-ranking-title {
      font-size: 1.8rem;
      background: var(--fire-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.5rem;
    }

    .power-ranking-subtitle {
      color: var(--text-secondary);
      font-size: 0.9rem;
    }

    .power-bar {
      display: flex;
      align-items: center;
      margin: 1rem 0;
      position: relative;
    }

    .power-bar-label {
      width: 150px;
      font-weight: 600;
    }

    .power-bar-track {
      flex: 1;
      height: 30px;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 15px;
      overflow: hidden;
      position: relative;
    }

    .power-bar-fill {
      height: 100%;
      border-radius: 15px;
      display: flex;
      align-items: center;
      justify-content: flex-end;
      padding-right: 1rem;
      color: white;
      font-weight: bold;
      transition: width 1s ease-out;
      position: relative;
      overflow: hidden;
    }

    .power-bar-fill::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      animation: shimmerBar 2s infinite;
    }

    @keyframes shimmerBar {
      0% { left: -100%; }
      100% { left: 100%; }
    }

    .power-bar-change {
      margin-left: 1rem;
      font-size: 0.9rem;
      display: flex;
      align-items: center;
      gap: 0.2rem;
    }

    .power-bar-change.up { color: var(--success); }
    .power-bar-change.down { color: var(--danger); }

    /* ===== CSV IMPORT ===== */
    .import-section {
      background: var(--bg-card);
      border-radius: 16px;
      padding: 2rem;
      text-align: center;
      margin: 2rem 0;
      border: 2px dashed rgba(102, 126, 234, 0.3);
    }

    .import-section.drag-over {
      background: rgba(102, 126, 234, 0.1);
      border-color: var(--accent);
    }

    .import-icon {
      font-size: 3rem;
      margin-bottom: 1rem;
    }

    .import-title {
      font-size: 1.3rem;
      margin-bottom: 0.5rem;
    }

    .import-desc {
      color: var(--text-secondary);
      margin-bottom: 1.5rem;
    }

    .import-btn {
      padding: 1rem 2rem;
      background: var(--epic-gradient);
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .import-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }

    /* ===== ANIMATIONS ===== */
    .animate-in {
      animation: slideIn 0.5s ease-out;
    }

    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateX(-20px);
      }
      to {
        opacity: 1;
        transform: translateX(0);
      }
    }

    .counter {
      display: inline-block;
      animation: countUp 1s ease-out;
    }

    @keyframes countUp {
      from { transform: scale(0); }
      to { transform: scale(1); }
    }

    /* ===== MOBILE RESPONSIVE ===== */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 1rem;
      }

      .nav-tabs {
        padding: 1rem;
        justify-content: flex-start;
      }

      .dashboard-grid {
        grid-template-columns: 1fr;
      }

      .rivalry-players {
        flex-direction: column;
        gap: 1rem;
      }

      .power-bar-label {
        width: 100px;
        font-size: 0.9rem;
      }

      .leaderboard-filters {
        flex-wrap: wrap;
      }

      .achievements-grid {
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
      }
    }

    /* ===== LOADING STATE ===== */
    .loading {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 200px;
    }

    .spinner {
      width: 50px;
      height: 50px;
      border: 3px solid rgba(102, 126, 234, 0.3);
      border-top-color: var(--accent);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <span class="trophy-logo">üèÜ</span>
        <h1>Pekkas Pokal</h1>
        <span class="year-display">2011-2024</span>
      </div>
    </div>
  </header>

  <!-- Navigation -->
  <nav class="nav-tabs">
    <button class="nav-tab active" data-tab="dashboard"><span>üìä</span> Dashboard</button>
    <button class="nav-tab" data-tab="leaderboard"><span>ü•á</span> Topplista</button>
    <button class="nav-tab" data-tab="achievements"><span>üéñÔ∏è</span> Achievements</button>
    <button class="nav-tab" data-tab="rivalries"><span>‚öîÔ∏è</span> Rivalries</button>
    <button class="nav-tab" data-tab="records"><span>üìú</span> Rekord</button>
    <button class="nav-tab" data-tab="statistics"><span>üìà</span> Statistik</button>
    <button class="nav-tab" data-tab="import"><span>üìÅ</span> Importera</button>
  </nav>

  <!-- Main Container -->
  <div class="container">
    <!-- Dashboard Tab -->
    <div id="dashboard" class="tab-content active">
      <div class="dashboard-grid">
        <div class="stat-card">
          <div class="stat-icon">üèÜ</div>
          <div class="stat-value counter" id="total-competitions">14</div>
          <div class="stat-label">T√§vlingar</div>
          <div class="stat-change positive">
            <span>‚Üë</span> 1 ny t√§vling 2024
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üë•</div>
          <div class="stat-value counter" id="total-participants">13</div>
          <div class="stat-label">Deltagare</div>
          <div class="stat-change">
            <span>‚Üí</span> Stabil grupp
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üî•</div>
          <div class="stat-value" id="current-champion">Erik V.</div>
          <div class="stat-label">Senaste Vinnare</div>
          <div class="stat-change positive">
            <span>üé£</span> Fisket√§vling 2024
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">üëë</div>
          <div class="stat-value" id="most-wins">Per W.</div>
          <div class="stat-label">Flest Vinster</div>
          <div class="stat-change">
            <span>üèÖ</span> 3 vinster totalt
          </div>
        </div>
      </div>

      <!-- Power Rankings -->
      <div class="power-ranking">
        <div class="power-ranking-header">
          <div class="power-ranking-title">üî• POWER RANKINGS 2024 üî•</div>
          <div class="power-ranking-subtitle">Baserat p√• senaste prestationer och momentum</div>
        </div>
        <div id="power-rankings-list"></div>
      </div>

      <!-- Fun Stats -->
      <div class="fun-stats">
        <div class="fun-stats-title">
          <span>üéâ</span> Roliga Fakta <span>üéâ</span>
        </div>
        <div id="fun-stats-list"></div>
      </div>

      <!-- Recent Activity Chart -->
      <div class="chart-container">
        <div class="chart-header">
          <div class="chart-title">üìä Deltagande √∂ver Tid</div>
        </div>
        <canvas id="participation-chart"></canvas>
      </div>
    </div>

    <!-- Leaderboard Tab -->
    <div id="leaderboard" class="tab-content">
      <div class="leaderboard">
        <div class="leaderboard-header">
          <div class="leaderboard-title">
            <span>üèÜ</span> Hall of Fame
          </div>
          <div class="leaderboard-filters">
            <button class="filter-btn active" data-filter="all">Alla Tider</button>
            <button class="filter-btn" data-filter="recent">Senaste 5 √Ör</button>
            <button class="filter-btn" data-filter="2024">2024</button>
          </div>
        </div>
        <div class="leaderboard-list" id="leaderboard-list"></div>
      </div>

      <!-- Head to Head Comparison -->
      <div class="chart-container">
        <div class="chart-header">
          <div class="chart-title">ü•ä Vinstf√∂rdelning</div>
        </div>
        <canvas id="wins-chart"></canvas>
      </div>
    </div>

    <!-- Achievements Tab -->
    <div id="achievements" class="tab-content">
      <h2 style="text-align: center; margin-bottom: 2rem;">üéñÔ∏è Achievements & Utm√§rkelser</h2>
      <div class="achievements-grid" id="achievements-grid"></div>
    </div>

    <!-- Rivalries Tab -->
    <div id="rivalries" class="tab-content">
      <h2 style="text-align: center; margin-bottom: 2rem;">‚öîÔ∏è Episka Rivaliteter</h2>
      <div id="rivalries-list"></div>
    </div>

    <!-- Records Tab -->
    <div id="records" class="tab-content">
      <h2 style="text-align: center; margin-bottom: 2rem;">üìú Rekord & Milstolpar</h2>
      <div class="records-grid" id="records-grid"></div>
    </div>

    <!-- Statistics Tab -->
    <div id="statistics" class="tab-content">
      <div class="chart-container">
        <div class="chart-header">
          <div class="chart-title">üìà Prestationsutveckling</div>
        </div>
        <canvas id="performance-chart"></canvas>
      </div>

      <div class="chart-container">
        <div class="chart-header">
          <div class="chart-title">üéØ Genomsnittlig Placering per Deltagare</div>
        </div>
        <canvas id="average-position-chart"></canvas>
      </div>
    </div>

    <!-- Import Tab -->
    <div id="import" class="tab-content">
      <div class="import-section" id="import-drop-zone">
        <div class="import-icon">üìÅ</div>
        <div class="import-title">Importera T√§vlingsdata</div>
        <div class="import-desc">Dra och sl√§pp din CSV-fil h√§r eller klicka f√∂r att v√§lja</div>
        <input type="file" id="csv-file" accept=".csv" style="display: none;">
        <button class="import-btn" onclick="document.getElementById('csv-file').click()">
          V√§lj CSV-fil
        </button>
      </div>
    </div>
  </div>

  <script>
    // Competition data structure
    let competitionData = {
      competitions: [],
      participants: [],
      initialized: false
    };

    // Sample data for demonstration (will be replaced by CSV import)
    const sampleData = {
      participants: [
        'Olov Melander', 'Mikael H√§gglund', 'Viktor Jones', 'Per Wikman',
        'Erik Vallgren', 'Henrik Lundqvist', 'Rickard Nilsson', 'Niklas Norberg',
        'Per Olsson', 'Tobias Lundqvist', 'Lars Sandin', 'Ludvig Ulenius', 'Jonas Eriksson'
      ],
      competitions: [
        { year: 2024, name: 'Fisket√§vling', winner: 'Erik Vallgren', location: 'Sj√§levad' },
        { year: 2023, name: 'F√§kting', winner: 'Per Wikman', location: 'Stockholm' },
        { year: 2022, name: 'Skytte', winner: 'Ludvig Ulenius', location: 'Arn√§svall' },
        { year: 2021, name: 'M√•lning', winner: 'Olov Melander', location: '√Ös' },
        { year: 2020, name: 'Covid', winner: 'Per Wikman', location: '' },
        { year: 2019, name: 'Pingis', winner: 'Viktor Jones', location: 'Bredbyn' },
        { year: 2018, name: 'Kortspel Ambition', winner: 'Niklas Norberg', location: 'Kungsholmen' },
        { year: 2017, name: 'Triathlon', winner: 'Viktor Jones', location: 'Lomsj√∂n' },
        { year: 2016, name: 'M√•ngkamp Lundqvist', winner: 'Niklas Norberg', location: '' },
        { year: 2015, name: 'Bondespelen', winner: 'Per Wikman', location: 'Billsta' },
        { year: 2014, name: 'M√•ngkamp Uppsala', winner: '', location: 'Uppsala' },
        { year: 2013, name: 'Femkamp', winner: 'Erik Vallgren', location: 'Kroksta' },
        { year: 2012, name: 'Gokart', winner: 'Jonas Eriksson', location: 'Varggropen' },
        { year: 2011, name: 'Fantasy Premier League', winner: 'Rickard Nilsson', location: '' }
      ]
    };

    // Initialize application
    function init() {
      setupTabs();
      loadDashboard();
      loadLeaderboard();
      loadAchievements();
      loadRivalries();
      loadRecords();
      loadStatistics();
      setupCSVImport();
    }

    // Tab navigation
    function setupTabs() {
      const tabs = document.querySelectorAll('.nav-tab');
      const contents = document.querySelectorAll('.tab-content');

      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const targetTab = tab.dataset.tab;
          
          tabs.forEach(t => t.classList.remove('active'));
          contents.forEach(c => c.classList.remove('active'));
          
          tab.classList.add('active');
          document.getElementById(targetTab).classList.add('active');
        });
      });
    }

    // Load Dashboard
    function loadDashboard() {
      // Power Rankings
      const powerRankings = calculatePowerRankings();
      const powerList = document.getElementById('power-rankings-list');
      
      powerRankings.forEach((player, index) => {
        const bar = document.createElement('div');
        bar.className = 'power-bar animate-in';
        bar.style.animationDelay = `${index * 0.1}s`;
        
        const colors = [
          'linear-gradient(135deg, #ff6b6b, #feca57)',
          'linear-gradient(135deg, #48dbfb, #0abde3)',
          'linear-gradient(135deg, #ff9ff3, #ee5a24)',
          'linear-gradient(135deg, #54a0ff, #5f27cd)',
          'linear-gradient(135deg, #00d2d3, #1dd1a1)'
        ];
        
        bar.innerHTML = `
          <div class="power-bar-label">${player.name}</div>
          <div class="power-bar-track">
            <div class="power-bar-fill" style="width: ${player.power}%; background: ${colors[index % colors.length]}">
              ${player.power}%
            </div>
          </div>
          <div class="power-bar-change ${player.trend}">
            ${player.trend === 'up' ? '‚Üë' : player.trend === 'down' ? '‚Üì' : '‚Üí'}
            ${Math.abs(player.change)}
          </div>
        `;
        
        powerList.appendChild(bar);
      });

      // Fun Stats
      const funStats = [
        { emoji: 'üî•', title: 'Hetaste Spelaren', desc: 'Erik Vallgren - 2 vinster p√• 3 √•r!' },
        { emoji: 'üéØ', title: 'Mr. Consistent', desc: 'Olov Melander - Alltid topp 5' },
        { emoji: 'üò¥', title: 'Sovmorgon', desc: 'Lars Sandin - Missat 3 t√§vlingar i rad' },
        { emoji: 'üé≠', title: 'Drama Queen', desc: 'Viktor Jones - Mest sp√§nnande matcher' },
        { emoji: 'üçÄ', title: 'Lucky Charm', desc: 'Per Wikman - 3 vinster med minimal marginal' },
        { emoji: 'üí™', title: 'Comeback Kid', desc: 'Niklas Norberg - Fr√•n sist till f√∂rst!' }
      ];

      const funStatsList = document.getElementById('fun-stats-list');
      funStats.forEach((stat, index) => {
        const item = document.createElement('div');
        item.className = 'fun-stat-item animate-in';
        item.style.animationDelay = `${index * 0.1}s`;
        item.innerHTML = `
          <div class="fun-stat-emoji">${stat.emoji}</div>
          <div class="fun-stat-content">
            <div class="fun-stat-title">${stat.title}</div>
            <div class="fun-stat-desc">${stat.desc}</div>
          </div>
        `;
        funStatsList.appendChild(item);
      });

      // Participation Chart
      createParticipationChart();
    }

    // Load Leaderboard
    function loadLeaderboard() {
      const winCounts = {};
      sampleData.competitions.forEach(comp => {
        if (comp.winner) {
          winCounts[comp.winner] = (winCounts[comp.winner] || 0) + 1;
        }
      });

      const sortedPlayers = Object.entries(winCounts)
        .sort((a, b) => b[1] - a[1])
        .slice(0, 10);

      const leaderboardList = document.getElementById('leaderboard-list');
      
      sortedPlayers.forEach((player, index) => {
        const item = document.createElement('div');
        const posClass = index === 0 ? 'gold' : index === 1 ? 'silver' : index === 2 ? 'bronze' : '';
        item.className = `leaderboard-item ${posClass} animate-in`;
        item.style.animationDelay = `${index * 0.1}s`;
        
        item.innerHTML = `
          <div class="position ${posClass}">${index + 1}</div>
          <div class="player-info">
            <div class="player-name">${player[0]}</div>
            <div class="player-stats">
              <span>üèÜ ${player[1]} vinster</span>
              <span>üìä ${Math.round(player[1] / sampleData.competitions.length * 100)}% vinstprocent</span>
            </div>
          </div>
          <div class="trophy-count">
            ${index === 0 ? '<div class="trophy">üëë Champion</div>' : ''}
          </div>
        `;
        
        leaderboardList.appendChild(item);
      });

      // Create wins chart
      createWinsChart(winCounts);
    }

    // Load Achievements
    function loadAchievements() {
      const achievements = [
        { icon: 'üëë', name: 'Kung', desc: 'Vinn 5 t√§vlingar', unlocked: false, legendary: true },
        { icon: 'ü•á', name: 'Guldmedalj√∂r', desc: 'Vinn 3 t√§vlingar', unlocked: true },
        { icon: 'üî•', name: 'P√• Eld', desc: '3 vinster i rad', unlocked: false },
        { icon: 'üéØ', name: 'Konsistent', desc: 'Topp 3 i 5 t√§vlingar', unlocked: true },
        { icon: 'üèÉ', name: 'Maratonl√∂pare', desc: 'Delta i 10 t√§vlingar', unlocked: true },
        { icon: 'ü¶æ', name: 'J√§rnmannen', desc: 'Delta i alla t√§vlingar', unlocked: false },
        { icon: 'üé≠', name: 'Allroundare', desc: 'Vinn 3 olika typer', unlocked: false },
        { icon: 'üçÄ', name: 'Turgubbe', desc: 'Vinn med 1 po√§ng', unlocked: true },
        { icon: 'üí™', name: 'Comeback', desc: 'Fr√•n sist till topp 3', unlocked: false },
        { icon: 'üåü', name: 'Rising Star', desc: 'F√∂rsta vinsten', unlocked: true },
        { icon: 'üèÅ', name: 'Veteran', desc: '10 √•r i t√§vlingen', unlocked: true },
        { icon: 'üé™', name: 'Showman', desc: 'Mest dramatisk vinst', unlocked: false }
      ];

      const grid = document.getElementById('achievements-grid');
      
      achievements.forEach((ach, index) => {
        const card = document.createElement('div');
        card.className = `achievement ${ach.unlocked ? 'unlocked' : 'locked'} ${ach.legendary ? 'legendary' : ''} animate-in`;
        card.style.animationDelay = `${index * 0.05}s`;
        
        card.innerHTML = `
          <div class="achievement-icon">${ach.icon}</div>
          <div class="achievement-name">${ach.name}</div>
          <div class="achievement-desc">${ach.desc}</div>
        `;
        
        grid.appendChild(card);
      });
    }

    // Load Rivalries
    function loadRivalries() {
      const rivalries = [
        {
          player1: 'Per Wikman',
          player2: 'Viktor Jones',
          score1: 3,
          score2: 2,
          meetings: 8,
          intensity: 'Eldigt üî•',
          lastBattle: 'F√§kting 2023'
        },
        {
          player1: 'Erik Vallgren',
          player2: 'Niklas Norberg',
          score1: 2,
          score2: 2,
          meetings: 6,
          intensity: 'J√§mnt ‚öñÔ∏è',
          lastBattle: 'Fisket√§vling 2024'
        }
      ];

      const list = document.getElementById('rivalries-list');
      
      rivalries.forEach((rivalry, index) => {
        const card = document.createElement('div');
        card.className = 'rivalry-card animate-in';
        card.style.animationDelay = `${index * 0.2}s`;
        
        const winner = rivalry.score1 > rivalry.score2 ? rivalry.player1 : 
                      rivalry.score2 > rivalry.score1 ? rivalry.player2 : null;
        
        card.innerHTML = `
          <div class="rivalry-header">
            <div class="rivalry-title">Klassisk Rivalitet</div>
          </div>
          <div class="rivalry-players">
            <div class="rivalry-player">
              <div class="rivalry-player-name" style="${winner === rivalry.player1 ? 'color: #4ade80' : ''}">${rivalry.player1}</div>
              <div class="rivalry-score">${rivalry.score1}</div>
            </div>
            <div class="rivalry-vs">VS</div>
            <div class="rivalry-player">
              <div class="rivalry-player-name" style="${winner === rivalry.player2 ? 'color: #4ade80' : ''}">${rivalry.player2}</div>
              <div class="rivalry-score">${rivalry.score2}</div>
            </div>
          </div>
          <div class="rivalry-stats">
            <div class="rivalry-stat">
              <div class="rivalry-stat-value">${rivalry.meetings}</div>
              <div class="rivalry-stat-label">M√∂ten</div>
            </div>
            <div class="rivalry-stat">
              <div class="rivalry-stat-value">${rivalry.intensity}</div>
              <div class="rivalry-stat-label">Intensitet</div>
            </div>
            <div class="rivalry-stat">
              <div class="rivalry-stat-value">${rivalry.lastBattle}</div>
              <div class="rivalry-stat-label">Senaste</div>
            </div>
          </div>
        `;
        
        list.appendChild(card);
      });
    }

    // Load Records
    function loadRecords() {
      const records = [
        { label: 'Flest Vinster', value: '3', holder: 'Per Wikman', date: '2015-2023', icon: 'üèÜ' },
        { label: 'L√§ngsta Vinstsvit', value: '2', holder: 'Viktor Jones', date: '2017-2019', icon: 'üî•' },
        { label: 'Flest Deltaganden', value: '10', holder: 'Flera spelare', date: 'Alla √•r', icon: 'üìä' },
        { label: 'Yngsta Vinnare', value: '22 √•r', holder: 'Jonas Eriksson', date: '2012', icon: 'üë∂' },
        { label: 'St√∂rsta Comeback', value: '11‚Üí1', holder: 'Niklas Norberg', date: '2016', icon: 'üöÄ' },
        { label: 'Flest Pallplatser', value: '7', holder: 'Per Wikman', date: '2011-2024', icon: 'ü•à' },
        { label: 'B√§sta Snitt', value: '3.2', holder: 'Per Wikman', date: 'Karri√§r', icon: 'üìà' },
        { label: 'Flest T√§vlingstyper Vunna', value: '3', holder: 'Per Wikman', date: 'Karri√§r', icon: 'üéØ' }
      ];

      const grid = document.getElementById('records-grid');
      
      records.forEach((record, index) => {
        const card = document.createElement('div');
        card.className = 'record-card animate-in';
        card.style.animationDelay = `${index * 0.1}s`;
        
        card.innerHTML = `
          <div class="record-label">${record.icon} ${record.label}</div>
          <div class="record-value">${record.value}</div>
          <div class="record-holder">${record.holder}</div>
          <div class="record-date">${record.date}</div>
        `;
        
        grid.appendChild(card);
      });
    }

    // Load Statistics
    function loadStatistics() {
      createPerformanceChart();
      createAveragePositionChart();
    }

    // Calculate Power Rankings
    function calculatePowerRankings() {
      const players = [
        { name: 'Erik Vallgren', power: 95, trend: 'up', change: 15 },
        { name: 'Per Wikman', power: 88, trend: 'down', change: 5 },
        { name: 'Viktor Jones', power: 82, trend: 'stable', change: 0 },
        { name: 'Niklas Norberg', power: 78, trend: 'up', change: 8 },
        { name: 'Olov Melander', power: 75, trend: 'up', change: 3 }
      ];
      
      return players;
    }

    // Chart Creation Functions
    function createParticipationChart() {
      const ctx = document.getElementById('participation-chart').getContext('2d');
      
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: sampleData.competitions.map(c => c.year).reverse(),
          datasets: [{
            label: 'Antal Deltagare',
            data: [8, 8, 7, 9, 10, 10, 9, 8, 7, 8, 9, 10, 11, 10],
            borderColor: '#667eea',
            backgroundColor: 'rgba(102, 126, 234, 0.1)',
            tension: 0.4,
            fill: true
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: { display: false }
          },
          scales: {
            y: {
              beginAtZero: true,
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: '#a8b2d1' }
            },
            x: {
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: '#a8b2d1' }
            }
          }
        }
      });
    }

    function createWinsChart(winCounts) {
      const ctx = document.getElementById('wins-chart').getContext('2d');
      const labels = Object.keys(winCounts);
      const data = Object.values(winCounts);
      
      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: labels,
          datasets: [{
            data: data,
            backgroundColor: [
              '#FFD700', '#C0C0C0', '#CD7F32', '#667eea', '#764ba2',
              '#f093fb', '#f5576c', '#4facfe', '#00f2fe', '#43e97b'
            ],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              position: 'right',
              labels: { color: '#a8b2d1' }
            }
          }
        }
      });
    }

    function createPerformanceChart() {
      const ctx = document.getElementById('performance-chart').getContext('2d');
      
      new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['2019', '2020', '2021', '2022', '2023', '2024'],
          datasets: [
            {
              label: 'Per Wikman',
              data: [1, 1, 3, 4, 1, 2],
              borderColor: '#ff6b6b',
              backgroundColor: 'rgba(255, 107, 107, 0.1)',
              tension: 0.4
            },
            {
              label: 'Erik Vallgren',
              data: [3, 5, 4, 3, 2, 1],
              borderColor: '#4facfe',
              backgroundColor: 'rgba(79, 172, 254, 0.1)',
              tension: 0.4
            },
            {
              label: 'Viktor Jones',
              data: [1, 4, 5, 5, 3, 3],
              borderColor: '#43e97b',
              backgroundColor: 'rgba(67, 233, 123, 0.1)',
              tension: 0.4
            }
          ]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              labels: { color: '#a8b2d1' }
            }
          },
          scales: {
            y: {
              reverse: true,
              min: 1,
              max: 10,
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: '#a8b2d1' }
            },
            x: {
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: '#a8b2d1' }
            }
          }
        }
      });
    }

    function createAveragePositionChart() {
      const ctx = document.getElementById('average-position-chart').getContext('2d');
      
      new Chart(ctx, {
        type: 'bar',
        data: {
          labels: ['Per W.', 'Viktor J.', 'Erik V.', 'Niklas N.', 'Olov M.'],
          datasets: [{
            label: 'Genomsnittlig Placering',
            data: [3.2, 3.8, 4.1, 4.5, 4.8],
            backgroundColor: [
              'rgba(255, 215, 0, 0.8)',
              'rgba(192, 192, 192, 0.8)',
              'rgba(205, 127, 50, 0.8)',
              'rgba(102, 126, 234, 0.8)',
              'rgba(118, 75, 162, 0.8)'
            ],
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          indexAxis: 'y',
          plugins: {
            legend: { display: false }
          },
          scales: {
            x: {
              reverse: true,
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: '#a8b2d1' }
            },
            y: {
              grid: { color: 'rgba(255, 255, 255, 0.1)' },
              ticks: { color: '#a8b2d1' }
            }
          }
        }
      });
    }

    // CSV Import
    function setupCSVImport() {
      const dropZone = document.getElementById('import-drop-zone');
      const fileInput = document.getElementById('csv-file');

      // Drag and drop
      dropZone.addEventListener('dragover', (e) => {
        e.preventDefault();
        dropZone.classList.add('drag-over');
      });

      dropZone.addEventListener('dragleave', () => {
        dropZone.classList.remove('drag-over');
      });

      dropZone.addEventListener('drop', (e) => {
        e.preventDefault();
        dropZone.classList.remove('drag-over');
        
        const file = e.dataTransfer.files[0];
        if (file && file.type === 'text/csv') {
          processCSV(file);
        }
      });

      // File input
      fileInput.addEventListener('change', (e) => {
        const file = e.target.files[0];
        if (file) {
          processCSV(file);
        }
      });
    }

    function processCSV(file) {
      const reader = new FileReader();
      
      reader.onload = (e) => {
        const csv = e.target.result;
        parseCSV(csv);
      };
      
      reader.readAsText(file);
    }

    function parseCSV(csv) {
      // Parse CSV and update competitionData
      console.log('CSV data received, ready for parsing');
      // Implementation would go here
      alert('CSV import funktionalitet kommer snart! Din data √§r redo att bearbetas.');
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>